<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6HVGXQFHWX"></script>
    <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-6HVGXQFHWX');</script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="turbo-cache-control" content="no-cache">

    <!-- Primary Meta Tags -->
    <title>Implementing CLI Translation Unit | Frinx Docs</title>
    <meta name="title" content="Implementing CLI Translation Unit | Frinx Docs">
    <meta name="description" content="CLI Translation units are located in https://github.com/FRINXio/cli-units repository. Java is used in CLI" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.frinx.io/frinx-uniconfig/developer-guide/cli-translation-unit/">
    <meta property="og:title" content="Implementing CLI Translation Unit | Frinx Docs">
    <meta property="og:description" content="CLI Translation units are located in https://github.com/FRINXio/cli-units repository. Java is used in CLI">
    <meta property="og:image" content="https://docs.frinx.io/frinx-uniconfig/developer-guide/cli-translation-unit/process-of-reading-of-cli-configuration-from-device.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://docs.frinx.io/frinx-uniconfig/developer-guide/cli-translation-unit/">
    <meta property="twitter:title" content="Implementing CLI Translation Unit | Frinx Docs">
    <meta property="twitter:description" content="CLI Translation units are located in https://github.com/FRINXio/cli-units repository. Java is used in CLI">
    <meta property="twitter:image" content="https://docs.frinx.io/frinx-uniconfig/developer-guide/cli-translation-unit/process-of-reading-of-cli-configuration-from-device.png">
    
    <script>(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="/static/favicon-32x32.png" rel="icon" />
    <link href="/resources/css/retype.css?v=1.11.2.699606552899" rel="stylesheet" data-turbo-track="reload" />

    <script type="text/javascript" src="/resources/js/config.js?v=1.11.2.699606552899" defer data-turbo-track="reload"></script>
    <script type="text/javascript" src="/resources/js/retype.js?v=1.11.2" defer data-turbo-track="reload"></script>
    <script id="lunr-js" type="text/javascript" src="/resources/js/lunr.js?v=1.11.2.699606552899" defer></script>
    <script id="prism-js" type="text/javascript" src="/resources/js/prism.js?v=1.11.2.699606552899" defer></script>
</head>
    <body>
        <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
    <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>

    <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
    <div class="container relative flex items-center justify-between flex-grow pr-6 md:justify-start">
        <!-- Mobile menu button skeleton -->
        <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center flex-shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px flex-shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
        <div v-cloak id="docs-sidebar-toggle"></div>

        <!-- Logo -->
        <div class="flex items-center justify-between h-full py-2 md:w-75">
            <div class="flex items-center px-2 md:px-6">
                <a id="docs-site-logo" href="/" class="flex items-center leading-snug text-2xl">
                    <span class="flex-grow-0 flex-shrink-0 overflow-hidden">
                        <img class="max-h-10 dark:hidden md:inline-block" src="/static/frinx_logo.png">
                        <img class="max-h-10 hidden dark:inline-block" src="/static/frinx_logo.png">
                    </span>
                </a>
            </div>

            <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
        </div>

        <div class="flex justify-between md:flex-grow">
            <!-- Top Nav -->
            <nav class="hidden md:flex">
    <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
        <li class="md:mr-6">
            <a class="inline-flex items-center py-2 md:mb-0 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="/">
                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                    <g fill="currentColor">
                        <path fill-rule="evenodd" d="M11.03 2.59a1.5 1.5 0 011.94 0l7.5 6.363a1.5 1.5 0 01.53 1.144V19.5a1.5 1.5 0 01-1.5 1.5h-5.75a.75.75 0 01-.75-.75V14h-2v6.25a.75.75 0 01-.75.75H4.5A1.5 1.5 0 013 19.5v-9.403c0-.44.194-.859.53-1.144l7.5-6.363zM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 01.75-.75h3.5a.75.75 0 01.75.75v6.25h5v-9.403L12 3.734z"/>
                    </g>
                </svg>
                <span>Home</span>
            </a>
        </li>
        <li class="md:mr-6">
            <a class="inline-flex items-center py-2 md:mb-0 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://frinx.io/" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                    <g fill="currentColor">
                        <path fill-rule="evenodd" d="M0 3.75C0 2.784.784 2 1.75 2h20.5c.966 0 1.75.784 1.75 1.75v16.5A1.75 1.75 0 0122.25 22H1.75A1.75 1.75 0 010 20.25V3.75zm1.75-.25a.25.25 0 00-.25.25V5.5h4v-2H1.75zM7 3.5v2h4v-2H7zm5.5 0v2h10V3.75a.25.25 0 00-.25-.25H12.5zm10 3.5h-21v13.25c0 .138.112.25.25.25h20.5a.25.25 0 00.25-.25V7z"/>
                    </g>
                </svg>
                <span>Webpage</span>
            </a>
        </li>
        <li class="md:mr-6">
            <a class="inline-flex items-center py-2 md:mb-0 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/FRINXio" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                    <g fill="currentColor">
                        <symbol id="mark-github-icon-symbol" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></symbol><use xlink:href="#mark-github-icon-symbol" />
                    </g>
                </svg>
                <span>GitHub</span>
            </a>
        </li>
        <li class="md:mr-6">
            <a class="inline-flex items-center py-2 md:mb-0 text-sm text-gray-400 whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://www.linkedin.com/company/frinx" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                    <g fill="currentColor">
                        <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-.139 9.237c.209 4.617-3.234 9.765-9.33 9.765-1.854 0-3.579-.543-5.032-1.475 1.742.205 3.48-.278 4.86-1.359-1.437-.027-2.649-.976-3.066-2.28.515.098 1.021.069 1.482-.056-1.579-.317-2.668-1.739-2.633-3.26.442.246.949.394 1.486.411-1.461-.977-1.875-2.907-1.016-4.383 1.619 1.986 4.038 3.293 6.766 3.43-.479-2.053 1.08-4.03 3.199-4.03.943 0 1.797.398 2.395 1.037.748-.147 1.451-.42 2.086-.796-.246.767-.766 1.41-1.443 1.816.664-.08 1.297-.256 1.885-.517-.439.656-.996 1.234-1.639 1.697z"/>
                    </g>
                </svg>
                <span>LinkedIn</span>
            </a>
        </li>
    </ul>
</nav>

            <!-- Header Right Skeleton -->
            <div v-cloak class="flex justify-end flex-grow skeleton">

                <!-- Search input mock -->
                <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                    <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                    </div>

                    <input class="w-full h-10 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 placeholder-gray-400 dark:placeholder-dark-400"
                    style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search" />
                </div>

                <!-- Mobile search button mock -->
                <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                </div>

                <!-- Dark mode switch placehokder -->
                <div class="w-10 h-10 lg:ml-2"></div>

                <!-- History button mock -->
                <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                    <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation"  style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                </div>
            </div>

            <div v-cloak class="flex items-center justify-end flex-grow">
                <div id="docs-mobile-search-button"></div>
                <doc-search-desktop></doc-search-desktop>

                <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                <doc-history></doc-history>
            </div>
        </div>
    </div>
</header>


    <div class="container relative flex bg-white">
        <!-- Sidebar Skeleton -->
<div v-cloak class="fixed flex flex-col flex-shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">

    <!-- Render this div, if config.showSidebarFilter is `true` -->
    <div class="flex items-center h-16 px-6">
        <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter" />
    </div>

    <div class="pl-6 mb-4 mt-1">
        <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
        <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
    </div>


    <div class="flex-shrink-0 mt-auto bg-transparent dark:border-dark-650">
        <a
    class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by"
    target="_blank"
    href="https://retype.com/"
    rel="noopener"
>
    <span class="text-xs whitespace-nowrap">Powered by</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
</a>

    </div>
</div>

<!-- Sidebar component -->
<doc-sidebar v-cloak>
    <template #sidebar-footer>
        <div
            class="flex-shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650"
        >

            <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                <nav>
                    <ul class="flex flex-wrap justify-center items-center">
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="/README.md">Home</a>
                        </li>
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://frinx.io/">Webpage</a>
                        </li>
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/FRINXio">GitHub</a>
                        </li>
                        <li class="mr-6">
                            <a class="block py-1 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://www.linkedin.com/company/frinx">LinkedIn</a>
                        </li>
                    </ul>
                </nav>
            </div>


            <a
    class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by"
    target="_blank"
    href="https://retype.com/"
    rel="noopener"
>
    <span class="text-xs whitespace-nowrap">Powered by</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
</a>

        </div>
    </template>
</doc-sidebar>


        <div class="flex-grow min-w-0 dark:bg-dark-850">
            <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
            <div class="flex">
    <div class="flex-grow min-w-0 px-6 md:px-16">
        <main class="relative pt-6 pb-16">
            <div class="docs-markdown" id="docs-content">
                <!-- Rendered if sidebar right is enabled -->
                <div id="docs-sidebar-right-toggle"></div>
               
                <!-- Page content  -->
<doc-anchor-target id="implementing-cli-translation-unit" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#implementing-cli-translation-unit">#</doc-anchor-trigger>
        <span>Implementing CLI Translation Unit</span>
    </h1>
</doc-anchor-target>
<p>CLI Translation units are located in
<a href="https://github.com/FRINXio/cli-units">https://github.com/FRINXio/cli-units</a> repository. Java is used in CLI
translation units.</p>
<doc-anchor-target id="init-unit">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#init-unit">#</doc-anchor-trigger>
        <span>Init Unit</span>
    </h2>
</doc-anchor-target>
<p>Init translation unit does not contain readers and writers but it only
contains implementation of <strong>TranslateUnit</strong>. There should be only one
init translation unit per device type. Purpose of the init TU is to
setup CLI prompt and define rollback strategy.</p>
<p>The implementation of <strong>TranslateUnit</strong> needs to override methods:</p>
<p><strong>SessionInitializationStrategy getInitializer(@Nonnull final
RemoteDeviceId id, @Nonnull final CliNode cliNodeConfiguration)</strong></p>
<p>Implement and return device specific <em>SessionInitializationStrategy</em>
where:</p>
<ul>
<li>Setup device CLI terminal with attributes like width and length
allowing to display infinite output.</li>
<li>Enter desired CLI mode which will be used as default - every
reader and writer gets CLI prompt in this state (e.g. EXEC mode
for IOS, config mode for IOS-XR, cli mode for Junos)</li>
</ul>
<p>These methods may be overridden if necessary:</p>
<p><strong>getPreCommitHook()</strong> - method that is invoked before actual commit is
written into device. For example this method can enter configuration
mode.</p>
<p><strong>getCommitHook()</strong> - method that invokes actual commit and should catch
any error on commit. Also it should handle any post-commit actions when
the commit was successful.</p>
<p><strong>getPostFailedHook()</strong> - method that is invoked when commit fails.
Should implement aborts or revert strategies.</p>
<p><strong>getErrorPatterns()</strong> - method returning Java Patterns with regular
expressions that match device specific error patterns.</p>
<p><strong>getCommitErrorPattern()</strong> - method returning Java Patterns with
regular expressions that match device specific error patterns that can
be returned by the device after issuing commit.</p>
<doc-anchor-target id="translate-unit">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#translate-unit">#</doc-anchor-trigger>
        <span>Translate Unit</span>
    </h2>
</doc-anchor-target>
<p>Translate unit class must implement interface
<strong>io.frinx.cli.unit.utils.AbstractUnit</strong>. Naming convention for translate
unit class is device-type+openconfig-domain+Unit (e.g.
IosXrInterfaceUnit). Translate unit class is usually instantiated,
initialized and closed from Blueprint.</p>
<p>Implementation of TranslateUnit must be registered into
<strong>TranslationUnitCollector</strong> and must specify device type and device
version during registration. Snippet below shows registration of
<a href="https://github.com/FRINXio/cli-units/blob/master/ios-xr/interface/src/main/java/io/frinx/cli/unit/iosxr/ifc/IosXRInterfaceUnit.java">IosXRInterfaceUnit</a>
for device type &quot;ios xr&quot; all versions.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">private final TranslationUnitCollector registry;
private TranslationUnitCollector.Registration reg;

public IosXRInterfaceUnit(@Nonnull final TranslationUnitCollector registry) {
    super(registry);
}

@Override
protected Set&lt;Device&gt; getSupportedVersions() {
    return IosXrDevices.IOS_XR_ALL;
}

@Override
protected String getUnitName() {
    return &quot;IOS XR Interface (Openconfig) translate unit&quot;;
}

@Override
public void provideHandlers(@Nonnull CustomizerAwareReadRegistryBuilder readRegistry,
                            @Nonnull CustomizerAwareWriteRegistryBuilder writeRegistry,
                            @Nonnull Context context) {
    Cli cli = context.getTransport();
    provideReaders(readRegistry, cli);
    provideWriters(writeRegistry, cli);
}</code></pre>
</doc-codeblock></div>
<p>Implementation of TranslateUnit must implement these methods:</p>
<p><strong>String getUnitName()</strong></p>
<p>Return unique string among all translation units which will be used as
ID for the translation unit (e.g. &quot;IOS XR Interface (Openconfig)
translate unit&quot;)</p>
<p><strong>Set getYangSchemas()</strong></p>
<p>Return YANG models containing composite nodes handled by
handlers(readers/writers). Default implementation returns empty Set if
no handlers are implemented.</p>
<p><strong>Set getRpcs(@Nonnull Context context)</strong></p>
<p>Return RPC services implemented in the translation unit. Parameter
<strong>context.getTransport()</strong> returns <strong>Cli</strong> object containing methods for
communication with a device via CLI - may need to be passed to RPC
implementations. Default implementation returns empty Set.</p>
<p><strong>Set&lt;Device&gt; getSupportedVersions()</strong></p>
<p>This method should return specific device version that work with this
handler.</p>
<p><strong>void provideHandlers()</strong></p>
<p>Handlers(readers/writers) need to be registered in this method.
Parameter <strong>context.getTransport()</strong> returns <strong>Cli</strong> object containing
methods for communication with a device via CLI - should be passed to
readers/writers.</p>
<p>This method should also registers for general Openconfig checks:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">CheckRegistry checkRegistry = ChecksMap.getOpenconfigCheckRegistry();
readRegistry.setCheckRegistry(checkRegistry);
writeRegistry.setCheckRegistry(checkRegistry);</code></pre>
</doc-codeblock></div>
<p>Instance-identifier in generic reader/writer must be without keys
pointing to the target composite node used in implemented reader/writer.</p>
<p>Instance-identifiers for YANG container and list (not for augmentations
and nodes behind augmentations) are automatically generated to <strong>IIDs</strong>
class (used in examples bellow) during build of openconfig project.</p>
<doc-anchor-target id="ordering-of-handlers">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#ordering-of-handlers">#</doc-anchor-trigger>
        <span>Ordering of handlers</span>
    </h3>
</doc-anchor-target>
<p>Writers are stored in a linear structure and are invoked in order of
registration. When registering a writer a relationship with another
writer or set of writers can be expressed using <strong>addBefore, addAfter,
subtreeAddBefore, subtreeAddAfter</strong> methods. E.g. InterfaceWriter and
VRFInterfaceWriter should have a relationship: InterfaceWriter -&gt;
VRFInterfaceWriter so that first an interface is created and only then
assigned to VRF.</p>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>VRF writer should be between them. If the order is not expressed
during registration, commands might be executed on device in an
unpredictable/invalid order.</p>
        </div>
    </div>
</div>
<p>The following sample shows a CLI translation unit with dependency
between 2 writers. The unit is dedicated for interface configuration on
a Cisco IOS device.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">R2(config)#interface loopback 1
R2(config-if)#ip address 10.0.0.1 255.255.255.255</code></pre>
</doc-codeblock></div>
<p>As the example shows, the <strong>ip address</strong> command must be executed after
the <strong>interface</strong> command.</p>
<p>Registration of Ipv4ConfigWriter by using the <strong>addAfter</strong> method ensures
that the OpenConfig ip address data is translated after OpenConfig
interface data. That means CLI commands are executed in the desired
order.</p>
<p><strong>rRegistry.add</strong></p>
<p>Use when common <strong>GenericConfigListReader</strong>, <strong>GenericConfigReader</strong>,
*<em>GenericOperListReader</em> or <strong>GenericOperReader</strong> need to be registered.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">rRegistry.add(IIDs.IN_INTERFACE, new InterfaceReader(cli));</code></pre>
</doc-codeblock></div>
<p><strong>rRegistry.addNoop</strong></p>
<p>Use to register noop writers</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">rRegistry.addNoop(IIDs.IN_IN_CONFIG);</code></pre>
</doc-codeblock></div>
<p><strong>rRegistry.subtreeAdd</strong></p>
<p>Use when a reader implementation also fills composite child nodes of
target composite node. Method <strong>subtreeAdd</strong> requires a set of IIDs for
all handled children.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">rRegistry.subtreeAdd(IIDs.IN_IN_AUG_INTERFACE1_ET_CONFIG, new EthernetConfigReader(cli),
    Sets.newHashSet(IIDs.IN_IN_ET_CO_AUG_CONFIG1,
        io.frinx.openconfig.openconfig.lacp.IIDs.IN_IN_ET_CO_AUG_LACPETHCONFIGAUG);</code></pre>
</doc-codeblock></div>
<p><strong>wRegistry.add</strong></p>
<p>Use when common <strong>GenericListWriter</strong> or <strong>GenericWriter</strong> are registered.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">wRegistry.add(IIDs.IN_IN_CONFIG, new InterfaceConfigWriter(cli));</code></pre>
</doc-codeblock></div>
<p><strong>wRegistry.subtreeAdd</strong></p>
<p>Use for writers handling data of whole composite node subtrees. This
ensures that if only a child node is updated, the writer gets triggered.
Method <strong>subtreeAdd</strong> requires a set of IIDs for all handled children, the
IIDs must start from the reader itself, not from root.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">wRegistry.subtreeAddAfter(IIDs.IN_IN_AUG_INTERFACE1_ET_CONFIG, new EthernetConfigWriter(cli),
    Sets.newHashSet(IIDs.IN_IN_ET_CO_AUG_CONFIG1,
        io.frinx.openconfig.openconfig.lacp.IIDs.IN_IN_ET_CO_AUG_LACPETHCONFIGAUG),
    IIDs.IN_IN_CONFIG);</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>This example uses method subtreeAddAfter instead of subtreeAdd. Last
parameter in this method shows dependency on writer registered under
IIDs.IN_IN_CONFIG.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="device-registration">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#device-registration">#</doc-anchor-trigger>
        <span>Device registration</span>
    </h3>
</doc-anchor-target>
<p>In TranslateUnit we had just created, <strong>e.g. MplsUnitXR4.java</strong>, we have
to register device as a constant located
<strong>../iosxr/init/IosXrDevices.java</strong> containing device type and version as
described in TranslateUnit &lt;cli-translation-unit-translate-unit&gt;
documentation.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">public void init() {
    reg = registry.registerTranslateUnit(IOS_4, this);
}</code></pre>
</doc-codeblock></div>
<p>This unit can reuse all writers/readers from existing ones, except the
writer (or other handler) we want to alter or create (in our example
writer for tunnel configuration). We have to create a new writer with
desired behaviour and add it into <strong>provideWriters</strong> method.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-java"><code v-pre class="language-java">private void provideWriters(ModifiableWriterRegistryBuilder wRegistry, Cli cli) {
    wRegistry.add(IIDs.NE_NE_MP_LS_CO_TU_TU_CONFIG, new TunnelConfigWriterXR4(cli));
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="readers">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#readers">#</doc-anchor-trigger>
        <span>Readers</span>
    </h2>
</doc-anchor-target>
<p>Readers are handlers responsible for reading and parsing the data coming
from a device</p>
<p>There are 2 types of readers: Reader and ListReader. Reader can be used
to handle container or augmentation nodes and ListReader should handle
list nodes from YANG.</p>
<ul>
<li>Both types need to implement <strong>readCurrentAttributes</strong> to fill the
builder with appropriate values</li>
<li>ListReader needs to also implement <strong>getAllIds()</strong> where it
retrieves a key for each item to be present in current list. After
the list is received, framework will invoke
<strong>readCurrentAttributes</strong> for each item from getAllIds</li>
</ul>
<p>Readers should always use overloaded <strong>blockingRead</strong> method which takes
in the ReadContext since that method performs caching internally</p>
<p><strong>Use full version of commands</strong> e.g. <em>show running-config interface</em>
instead of <strong>sh run int</strong></p>
<doc-anchor-target id="reading-of-cli-and-device-configuration">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#reading-of-cli-and-device-configuration">#</doc-anchor-trigger>
        <span>Reading of CLI and device configuration</span>
    </h3>
</doc-anchor-target>
<p>CLI readers maintain translation between device and yang models. We&#x27;re
sending read commands to the device and outputs are cached. This process
is shown below.</p>
<p><figure class="content-center">
    <img src="process-of-reading-of-cli-configuration-from-device.png" alt="Reading CLI conf from device" />
    <figcaption class="caption">Reading CLI conf from device</figcaption>
</figure>
</p>
<doc-anchor-target id="reading-of-configuration-from-cli-network-device---different-scenarios">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#reading-of-configuration-from-cli-network-device---different-scenarios">#</doc-anchor-trigger>
        <span>Reading of configuration from CLI network device - different scenarios</span>
    </h4>
</doc-anchor-target>
<p>The diagram below shows four specific scenarios:</p>
<ol>
<li>Configuration is read using show running-config pattern for the
first time</li>
<li>Another configuration is read using running-config pattern
<ul>
<li>cache can be used</li>
</ul>
</li>
<li>BGP configuration/state is read using &quot;show route bgp 100&quot;
<ul>
<li>the running-config pattern is not used</li>
</ul>
</li>
<li>BGP configuration/state is read using &quot;show route bgp 100&quot; again
<ul>
<li>cached can be used</li>
</ul>
</li>
</ol>
<p><figure class="content-center">
    <img src="reading-of-configuration-from-cli-network-device-different-scenarios.png" alt="Different scenarios" />
    <figcaption class="caption">Different scenarios</figcaption>
</figure>
</p>
<doc-anchor-target id="mandatory-interfaces-to-implement">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#mandatory-interfaces-to-implement">#</doc-anchor-trigger>
        <span>Mandatory interfaces to implement</span>
    </h3>
</doc-anchor-target>
<p>Each reader needs to implement one of these interfaces based on type of
target node in YANG. These interfaces also contain util methods which
may be used for better manipulation with data. For more information
about methods please read javadocs.</p>
<p><strong>CliConfigListReader</strong> - implement this interface if target composite
node in YANG is list and represents config data.</p>
<p><strong>CliConfigReader</strong> - implement this interface if target composite node
in YANG is container or augmentation and represents config data.</p>
<p><strong>CliOperListReader</strong> - implement this interface if target composite
node in YANG is list and represents operational data.</p>
<p><strong>CliOperReader</strong> - implement this interface if target composite node in
YANG is container or augmentation and represents operational data.</p>
<p>In cases where you want to invoke multiple readers on reading one YANG
node, extend following abstract classes:</p>
<p><strong>CompositeListReader</strong> - extend this abstract class if multiple list
readers need to be invoked when reading specific list in YANG.</p>
<p><strong>CompositeReader</strong> - extend this abstract class if multiple readers
need to be invoked when reading specific node in YANG.</p>
<p>A practical example of their usage is reading network instance based on
it&#x27;s type. All child readers need to implement a check when the
particular reader should be invoked or the parent reader should move on
to the next reader.</p>
<p>For example child reader for bgp (located under <strong>protocol</strong>) needs to
check if <strong>identifier</strong> in <strong>protocol</strong> has value <strong>BGP</strong>. Otherwise reader
for bgp will be invoked even if <strong>protocol identifier</strong> is <strong>OSPF</strong>.</p>
<doc-anchor-target id="util-classes">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#util-classes">#</doc-anchor-trigger>
        <span>Util classes</span>
    </h3>
</doc-anchor-target>
<p><strong>ParsingUtils</strong> - use methods of this util class if you want to parse
plaintext to java object builder</p>
<doc-anchor-target id="plaintext-parsing-hints">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#plaintext-parsing-hints">#</doc-anchor-trigger>
        <span>Plaintext parsing hints</span>
    </h3>
</doc-anchor-target>
<p><strong>Use</strong> as <strong>specific regular expressions</strong> when parsing CLI output as
possible.</p>
<p><strong>For Cisco CLI devices</strong> avoid using <strong>section</strong> and other advanced
formatting parameters. <strong>Only</strong> <code v-pre>include</code>, <code v-pre>exclude</code> <strong>and</strong> <code v-pre>begin</code>
<strong>are allowed</strong>.</p>
<p>Use CONFIG data as the source of truth when parsing information from
device. Except when parsing state containers (or containers explicitly
marked as <strong>config false</strong>).</p>
<ul>
<li>I.e. use <code v-pre>show running-config | include router ospf</code> instead of
<code v-pre>sh ospf</code> when retrieving ospf routers list.</li>
<li>In some cases, it is not possible to just use config data e.g. <em>sh
run interface</em> does not show any data for interfaces that have no
configuration. In this case it is necessary to use operational
information from e.g. <code v-pre>show ip interface brief</code></li>
</ul>
<p><strong>Use following pattern when parsing multiline output from CLI</strong>, where
it is difficult to extract lines and their relationships: i.e. when
parsing configured BGP neighbors per address family following command
can be used:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">show running-config | include ^router bgp | ^ address-family |^ neighbor``</code></pre>
</doc-codeblock></div>
<p>which results in:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-none"><code v-pre class="language-none">router bgp 65000
    address-family ipv4 vrf vrf1
        neighbor 1.2.3.4 remote-as 65000&gt;
        neighbor 1.2.3.4 activate
    address-family ipv4 vrf vrf2
        neighbor 2.2.0.1 remote-as 65000
        neighbor 2.2.0.1 activate</code></pre>
</doc-codeblock></div>
<p>This output can then be parsed by:</p>
<ul>
<li>Remove newlines to get a single line of string</li>
<li>Replace &quot;router&quot; with &quot;&quot; to separate bgp routers per line</li>
<li>Find the line that matches required router bgp {{ID}}</li>
<li>Take that line and replace &quot;address-family&quot; with &quot;-family&quot; to get
address-family neighbors per line</li>
</ul>
<doc-anchor-target id="base-readers">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#base-readers">#</doc-anchor-trigger>
        <span>Base Readers</span>
    </h3>
</doc-anchor-target>
<p>Each base reader should contain abstract methods:</p>
<ul>
<li><strong>String getReadCommand(&lt;args&gt;)</strong> - each child reader should fill
in the read command used to get information needed for this reader.
Arguments may vary and they are used to be more specific in the read
command (eg. when creating a command to gather information about a
specific interface, you may want to pass interface name as
argument).</li>
<li><strong>Pattern get&lt;command&gt;Line(&gt;)</strong> - there may be more such methods
and they are used to get the regular expression needed to parse
output of the command (eg. in case of interface reader, you will
create methods getDescriptionLine, getShutdownLine etc.)</li>
</ul>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>Naming of the methods should be unified in order to be easily parsed
by auto-generated documentation.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="writers">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#writers">#</doc-anchor-trigger>
        <span>Writers</span>
    </h2>
</doc-anchor-target>
<p>A writer needs to implement all 3 methods: Write, Update, Delete in
order to fully support default rollback mechanism of the framework</p>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>Time showed that update like 1. delete, 2. write is anti-pattern and
should not be used. There is just one case where it is necessary: when
re-writing list entry, you must first delete the previous entry, then
write the new one, otherwise the previous entry would still be present
and the new entry will be added to the list.</p>
        </div>
    </div>
</div>
<p>A writer can properly work only if there is a reader for the same
composite node.</p>
<p>A writer should check whether the command it executed was handled by the
device properly (by checking the output) and if not throw one of the
Write/Update/Delete FailedException</p>
<p><strong>Chunk templating framework is preferred to use in writers</strong>. It gives
us:</p>
<ul>
<li>Null safety</li>
<li>if/loop etc. inside templates</li>
<li>Default values and many more</li>
</ul>
<p><strong>Use full version of commands</strong> e.g. <code v-pre>configure terminal</code> instead of
<code v-pre>conf t</code></p>
<doc-anchor-target id="mandatory-interfaces-to-implement-1">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#mandatory-interfaces-to-implement-1">#</doc-anchor-trigger>
        <span>Mandatory interfaces to implement</span>
    </h3>
</doc-anchor-target>
<p>Each writer needs to implement one of these interfaces based on type of
target node in YANG. Unlike mandatory interfaces for reading, only
interfaces for writing config data are available (because it is not
possible to write operational data). These interfaces also contain util
methods which may be used for better manipulation with data. For more
information about methods please read javadocs.</p>
<p>All writers override updateCurrentAttributes method and avoid
delete/write combination, unless specified in a comment.</p>
<p><strong>CliListWriter</strong> - implement this interface if target composite node in
YANG is list. An implementation needs to be registered as
GenericListWriter.</p>
<p><strong>CliWriter</strong> - implement this interface if target composite node in
YANG is container or augmentation. An implementation needs to be
registered as GenericWriter.</p>
<p><strong>CompositeWriter</strong> - extend this abstract class when multiple writers
need to be invoked on one YANG node. The writers need to implement a
check whether or not should they be invoked.</p>
<doc-anchor-target id="base-writers">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#base-writers">#</doc-anchor-trigger>
        <span>Base Writers</span>
    </h3>
</doc-anchor-target>
<p>Each base writer should contain abstract methods:</p>
<ul>
<li><strong>String updateTemplate(Config before, Config after)</strong> this method
returns Chunk template used for writing and updating data on the
device.</li>
<li><strong>String deleteTemplate(Config data)</strong> this method returns Chunk
template used for deleting data from device.</li>
</ul>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>If updating data is done differently than writing new data, method
<strong>String writeTemplate(Config data)</strong> might be used as well.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="chunk-templates">
    <h4>
        <doc-anchor-trigger class="header-anchor-trigger" to="#chunk-templates">#</doc-anchor-trigger>
        <span>Chunk Templates</span>
    </h4>
</doc-anchor-target>
<p>Each original writer transformed to use a base writer should have all
it&#x27;s templates written in Chunk. We extended Chunk to achieve easier
manipulation with data. There is now a new filter called <em>update</em>. It&#x27;s
usage is following:</p>
<p><strong>&quot;{$data|update(mtu,mtu $data.mtu, no mtu)}&quot;</strong></p>
<ul>
<li><strong>$data</strong> represents the data structure on which we check if it was
updated from the previous state.</li>
<li><strong>mtu</strong> first argument represents the <strong>name</strong> of the field that
should be checked within the $data</li>
<li><strong>$data.mtu</strong> second argument represents the actual string that will
be sent to the device if the value of the field named in first
argument was changed or didn&#x27;t exist before</li>
<li><strong>no mtu</strong> third argument represents the actual string that will be
sent to the device if the value of the field named in first argument
was deleted</li>
<li>optional <strong>true</strong> fourth argument, if present, lets the filter know it
should send <strong>both</strong> outputs to the device, first the delete string
(third argument) then the update string (second argument)</li>
</ul>
<p>Update filter does not send any of the strings to the device, if the
value did not change.</p>
<p>When using this filter in updateTemplate method, you <strong>must</strong> use fT()
method (format template) with one pair of the arguments being <em>&quot;before&quot;,
before</em> to let the template know what data represents the previous
state.</p>
<div class="flex mb-6">
    <div class="flex-shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3">
<p>Unfortunately, Opendaylight generates boolean fields instead of
Boolean and Chunk does not work with boolean fields in the same way as
any other object fields. Therefore for boolean values (eg. shutdown),
you cannot use update filter and checking for changes needs to be done
in a traditional way.</p>
        </div>
    </div>
</div>




                <!-- Required only on API pages -->
                <doc-toolbar-member-filter-no-results />
            </div>

            
<nav class="flex mt-14">
    <div class="w-1/2">
        <a class="px-5 py-4 h-full flex items-center break-all md:break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="/frinx-uniconfig/developer-guide/translation-unit-general-implementation/">
            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
            <span>
                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                <span class="block mt-1">Developing a new translation unit</span>
            </span>
        </a>
    </div>

    <div class="w-1/2">
        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-all md:break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="/frinx-uniconfig/developer-guide/netconf-translation-unit/">
            <span>
                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                <span class="block mt-1">NETCONF Unified Translation Unit</span>
            </span>
            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
        </a>
    </div>
</nav>


        </main>

        <div class="border-t dark:border-dark-650 pt-6 mb-8">
            <footer class="flex flex-wrap items-center justify-between">
    <div>
        <ul class="flex flex-wrap items-center text-sm">
    <li>
        <a class="block mr-4 py-2 text-sm whitespace-nowrap transition-colors duration-200 ease-linear text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 md:mb-0" href="about.md">About</a>
    </li>
</ul>

    </div>
    <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright 2022. <a href="https://frinx.io/">Frinx.io</a> All rights reserved.</p>
</div>
</footer>

        </div>
    </div>
    
    <!-- Rendered if sidebar right is enabled -->
    <!-- Sidebar right skeleton-->
    <div v-cloak class="fixed top-0 bottom-0 right-0 transform translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:flex-shrink-0 lg:pt-6 lg:transform-none lg:w-56 lg:z-0 md:w-72 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
        <div class="pl-5">
            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
        </div>
    </div>
    
    <!-- User should be able to hide sidebar right -->
    <doc-sidebar-right v-cloak></doc-sidebar-right>
</div>

        </div>
    </div>

    <doc-search-mobile></doc-search-mobile>
    <doc-back-to-top></doc-back-to-top>
</div>


        <div id="docs-overlay-target"></div>

        <script>window.__DOCS__ = { "title": "Implementing CLI Translation Unit", icon: "file", hasPrism: true, hasMermaid: false, hasMath: false }</script>
    </body>
</html>
